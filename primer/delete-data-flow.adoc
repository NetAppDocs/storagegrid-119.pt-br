---
permalink: primer/delete-data-flow.html 
sidebar: sidebar 
keywords: object, delete, deletion, object lock, bucket lifecycle, expiration, ilm, placement instruction 
summary: Todas as cópias de objetos são removidas do sistema StorageGRID quando um cliente ou locatário executa uma operação de exclusão ou quando a vida útil do objeto expira, acionando sua remoção automática.  Há um fluxo de dados definido para exclusão de objetos. 
---
= Excluir fluxo de dados
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Todas as cópias de objetos são removidas do sistema StorageGRID quando um cliente executa uma operação de exclusão ou quando a vida útil do objeto expira, acionando sua remoção automática.  Há um fluxo de dados definido para exclusão de objetos.



== Hierarquia de exclusão

O StorageGRID fornece vários métodos para controlar quando os objetos são retidos ou excluídos.  Os objetos podem ser excluídos por solicitação do cliente ou automaticamente.  O StorageGRID sempre prioriza quaisquer configurações de bloqueio de objeto do S3 em relação às solicitações de exclusão do cliente, que são priorizadas em relação ao ciclo de vida do bucket do S3 e às instruções de posicionamento do ILM.

* *Bloqueio de Objeto S3*: Se a configuração global de Bloqueio de Objeto S3 estiver habilitada para a grade, os clientes S3 poderão criar buckets com o Bloqueio de Objeto S3 habilitado e, em seguida, usar a API REST S3 para especificar as configurações de retenção até a data e retenção legal para cada versão de objeto adicionada a esse bucket.
+
** Uma versão de objeto que está sob retenção legal não pode ser excluída por nenhum método.
** Antes que a data de retenção de uma versão do objeto seja atingida, essa versão não pode ser excluída por nenhum método.
** Objetos em buckets com o S3 Object Lock habilitado são retidos pelo ILM "para sempre".  No entanto, após atingir a data de retenção, uma versão do objeto pode ser excluída por uma solicitação do cliente ou pela expiração do ciclo de vida do bucket.
** Se os clientes S3 aplicarem uma retenção até a data padrão ao bucket, eles não precisarão especificar uma retenção até a data para cada objeto.


* *Solicitação de exclusão de cliente*: Um cliente S3 pode emitir uma solicitação de exclusão de objeto.  Quando um cliente exclui um objeto, todas as cópias do objeto são removidas do sistema StorageGRID .
* *Excluir objetos no bucket*: os usuários do Tenant Manager podem usar esta opção para remover permanentemente todas as cópias dos objetos e versões de objetos em buckets selecionados do sistema StorageGRID .
* *Ciclo de vida do bucket S3*: os clientes S3 podem adicionar uma configuração de ciclo de vida aos seus buckets que especifica uma ação de expiração.  Se houver um ciclo de vida de bucket, o StorageGRID excluirá automaticamente todas as cópias de um objeto quando a data ou o número de dias especificado na ação Expiração forem atingidos, a menos que o cliente exclua o objeto primeiro.
* *Instruções de posicionamento do ILM*: Supondo que o bucket não tenha o S3 Object Lock habilitado e que não haja um ciclo de vida do bucket, o StorageGRID exclui automaticamente um objeto quando o último período na regra do ILM termina e não há mais posicionamentos especificados para o objeto.
+

NOTE: Quando um ciclo de vida de bucket do S3 é configurado, as ações de expiração do ciclo de vida substituem a política do ILM para objetos que correspondem ao filtro do ciclo de vida.  Como resultado, um objeto pode ser retido na grade mesmo depois que quaisquer instruções do ILM para posicioná-lo tenham expirado.



Ver link:../ilm/how-objects-are-deleted.html["Como os objetos são excluídos"] para maiores informações.



== Fluxo de dados para exclusões de clientes

image::../media/delete_data_flow.png[Fluxo de dados de exclusão do cliente]

. O serviço LDR recebe uma solicitação de exclusão do aplicativo cliente.
. O serviço LDR atualiza o armazenamento de metadados para que o objeto pareça excluído para solicitações do cliente e instrui o mecanismo ILM a remover todas as cópias dos dados do objeto.
. O objeto é removido do sistema.  O armazenamento de metadados é atualizado para remover metadados de objetos.




== Fluxo de dados para exclusões de ILM

image::../media/automatic_deletion_data_flow.png[Fluxo de dados de exclusão automática]

. O mecanismo ILM determina que o objeto precisa ser excluído.
. O mecanismo ILM notifica o armazenamento de metadados.  O armazenamento de metadados atualiza os metadados do objeto para que o objeto pareça excluído nas solicitações do cliente.
. O mecanismo ILM remove todas as cópias do objeto.  O armazenamento de metadados é atualizado para remover metadados de objetos.

